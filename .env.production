# 生产环境配置模板
# 复制此文件为 .env 并修改相应配置

# ===========================================
# 应用配置
# ===========================================
ENVIRONMENT=production
DEBUG=false
SECRET_KEY=CHANGE_THIS_TO_A_STRONG_RANDOM_KEY
ALLOWED_HOSTS=localhost,your-domain.com
APP_NAME=akshare_web
APP_VERSION=1.0.0

# ===========================================
# 服务器配置
# ===========================================
HOST=0.0.0.0
PORT=8000
WORKERS=4
LOOP=uvloop
RELOAD=false

# ===========================================
# 数据库配置 (主数据库)
# ===========================================
# 格式: mysql+aiomysql://user:password@host:port/database
DATABASE_URL=mysql+aiomysql://akshare_user:CHANGE_ME@localhost:3306/akshare_web
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ===========================================
# 数据仓库配置 (可选)
# ===========================================
WAREHOUSE_DB_URL=mysql+aiomysql://warehouse_user:CHANGE_ME@localhost:3307/akshare_warehouse
WAREHOUSE_POOL_SIZE=10

# ===========================================
# JWT 认证配置
# ===========================================
# 访问令牌过期时间（分钟）
ACCESS_TOKEN_EXPIRE_MINUTES=60
# 刷新令牌过期时间（天）
REFRESH_TOKEN_EXPIRE_DAYS=7
# 算法
ALGORITHM=HS256

# ===========================================
# CORS 配置
# ===========================================
# 允许的源（逗号分隔）
CORS_ORIGINS=http://localhost:3000,https://your-frontend-domain.com
# 允许的凭证
CORS_ALLOW_CREDENTIALS=true
# 允许的方法
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
# 允许的头
CORS_ALLOW_HEADERS=*

# ===========================================
# 速率限制配置
# ===========================================
# API 请求速率限制（请求/秒）
RATE_LIMIT_API=10
# 认证请求速率限制（请求/秒）
RATE_LIMIT_AUTH=5

# ===========================================
# 调度器配置
# ===========================================
# 调度器时区
SCHEDULER_TIMEZONE=Asia/Shanghai
# 最大并发任务数
SCHEDULER_MAX_WORKERS=5
# 任务默认超时（秒）
TASK_DEFAULT_TIMEOUT=300

# ===========================================
# 日志配置
# ===========================================
# 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
# 日志目录
LOG_DIR=logs
# 日志文件最大大小（MB）
LOG_MAX_BYTES=100
# 日志备份数量
LOG_BACKUP_COUNT=10

# ===========================================
# 缓存配置 (可选)
# ===========================================
# Redis URL (如果使用 Redis 缓存)
# REDIS_URL=redis://localhost:6379/0
# 缓存 TTL（秒）
CACHE_TTL=300

# ===========================================
# 邮件配置 (可选)
# ===========================================
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=akshare_web <noreply@your-domain.com>
# SMTP_USE_TLS=true

# ===========================================
# 监控配置 (可选)
# ===========================================
# Sentry DSN
# SENTRY_DSN=https://xxx@sentry.io/xxx
# 启用性能监控
# SENTRY_TRACES_SAMPLE_RATE=0.1

# ===========================================
# 存储配置
# ===========================================
# 数据文件目录
DATA_DIR=data
# 上传文件最大大小（MB）
UPLOAD_MAX_SIZE=100

# ===========================================
# 安全配置
# ===========================================
# 允许的主机（逗号分隔）
ALLOWED_HOSTS=*
# 启用严格传输安全
SECURE_HSTS_SECONDS=31536000
# 启用代理重定向保护
SECURE_PROXY_SSL_HEADER=true

# ===========================================
# 第三方服务配置
# ===========================================
# akshare API 代理（如果需要）
# AKSHARE_API_PROXY=
# 请求超时（秒）
REQUEST_TIMEOUT=30
